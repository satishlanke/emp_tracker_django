{% extends "base.html" %}
{% block content %}

  <div class="container">
    <div class="row justify-content-center mt-5">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
            <h3 class="text-center">Add User</h3>
          </div>
          <div class="card-body">
            <form id="addProjectForm"  method="post" action="{% url 'create_user' %}">

              {% csrf_token %}
              <div class="row">
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="userTypeId" class="form-label">User Type ID</label>
                    <input type="text" name="userTypeId" class="form-control" id="userTypeId" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="employeeId" class="form-label">Employee ID</label>
                    <input type="text" name="emp_id" class="form-control" id="employeeId" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="firstname" class="form-label">First Name</label>
                    <input type="text" name="first_name" class="form-control" id="firstname" required>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="lastname" class="form-label">Last Name</label>
                    <input type="text" name="last_name" class="form-control" id="lastname" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" name="username" class="form-control" id="username" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <input name="password" type="password" class="form-control" id="password" required>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="organizationName" class="form-label">Organization Name</label>
                    <input type="text" name="org_name" class="form-control" id="organizationName" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="dateOfBirth" class="form-label">Date of Birth</label>
                    <input type="date" name="date_of_birth" class="form-control" id="dateOfBirth" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="gender" class="form-label">Gender</label>
                    <select name="gender" class="form-control" id="gender" required>
                      <option value="">Select Gender</option>
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="primaryPhone" class="form-label">Primary Phone</label>
                    <input name="primary_phn" type="text" class="form-control" id="primaryPhone" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="secondaryPhone" class="form-label">Secondary Phone</label>
                    <input name="secondary_phn" type="text" class="form-control" id="secondaryPhone" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" name="email" class="form-control" id="email" required>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="status" class="form-label">Designation</label>
                    <select name="designation" class="form-control" id="status" required>
                      <option value="">Select Designation</option>
                      {% for item in designations %}
                      <option value="{{item.id}}">{{item.name}}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="status" class="form-label">Status</label>
                    <select name="status" class="form-control" id="status" required>
                      <option value="">Select Status</option>
                      {% for item in status %}
                      <option value="{{item.id}}">{{item.status_name}}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="status" class="form-label">Role</label>
                    <select name="role" class="form-control" multiple aria-label="multiple select example" required>
                      <option value="">Select Role</option>
                      {% for item in roles %}
                      <option value="{{item.id}}">{{item.name}}</option>
                      {% endfor %}
                    </select>
                    </select>
                  </div>
                </div>

              </div>
              <div class="text-center">
                <button type="submit" class="btn btn-success">Save</button>
                <a href="{% url 'users_view' %}" class="btn btn-secondary">Cancel</a>
              </div>
              <div class="text-center">
                
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  {% comment %} <script>
    $(document).ready(function() {
      // Form validation
      $("#addUserForm").submit(function(event) {
        event.preventDefault();
        if (this.checkValidity() === false) {
          event.stopPropagation();
        } else {
          // Perform form submission
          submitUserForm();
        }
        $(this).addClass("was-validated");
      });

      function submitUserForm() {
        // Get form data and perform submission logic
        var userTypeId = $("#userTypeId").val();
        var employeeId = $("#employeeId").val();
        var firstName = $("#firstName").val();
        var lastName = $("#lastName").val();
        var username = $("#username").val();
        var password = $("#password").val();
        var organizationName = $("#organizationName").val();
        var dateOfBirth = $("#dateOfBirth").val();
        var gender = $("input[name='gender']:checked").val();
        var primaryPhone = $("#primaryPhone").val();
        var secondaryPhone = $("#secondaryPhone").val();
        var email = $("#email").val();
        var designation = $("#designation").val();
        var status = $("#status").val();

        // Validate additional fields here
        if (userTypeId.trim() === "") {
          $("#userTypeId").addClass("is-invalid");
          return false;
        } else {
          $("#userTypeId").removeClass("is-invalid");
        }

        // Perform the form submission here
        // ...

        // Reset the form
        $("#addUserForm")[0].reset();
        $("#addUserForm").removeClass("was-validated");
      }
    });
  </script> {% endcomment %}

{% endblock %}
